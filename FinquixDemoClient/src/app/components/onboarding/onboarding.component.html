<div class="onboarding-container">
    <h2>Financial Onboarding</h2>
    <form [formGroup]="onboardingForm" (ngSubmit)="submit()">

        <!-- User Profile -->
        <mat-card>
            <h3>Personal Information</h3>
            <mat-form-field appearance="outline">
                <mat-label>Name</mat-label>
                <input matInput formControlName="name" />
            </mat-form-field>

            <mat-form-field appearance="outline">
                <mat-label>Age</mat-label>
                <input matInput formControlName="age" type="number" />
            </mat-form-field>

            <mat-form-field appearance="outline">
                <mat-label>Employment Status</mat-label>
                <input matInput formControlName="employmentStatus" />
            </mat-form-field>

            <mat-form-field appearance="outline">
                <mat-label>Dependents</mat-label>
                <input matInput formControlName="dependents" type="number" />
            </mat-form-field>

            <mat-form-field appearance="outline">
                <mat-label>Investment Behavior</mat-label>
                <mat-select formControlName="investmentBehavior">
                    <mat-option value="Conservative">Conservative</mat-option>
                    <mat-option value="Moderate">Moderate</mat-option>
                    <mat-option value="Aggressive">Aggressive</mat-option>
                </mat-select>
            </mat-form-field>
        </mat-card>

        <!-- Financial Goals -->
        <mat-card>
            <h3>Financial Goals</h3>
            <div formArrayName="financialGoals">
                <div *ngFor="let goal of financialGoals.controls; let i = index" [formGroupName]="i">

                    <mat-form-field appearance="outline">
                        <mat-label>Goal Type</mat-label>
                        <mat-select formControlName="goalType">
                            <mat-option value="DebtRepayment">Pay Off Debt</mat-option>
                            <mat-option value="HousePurchase">Buy a House</mat-option>
                            <mat-option value="Retirement">Retirement</mat-option>
                            <mat-option value="SaveForEducation">Save for Education</mat-option>
                        </mat-select>
                    </mat-form-field>

                    <mat-form-field appearance="outline">
                        <mat-label>Estimated Value ($)</mat-label>
                        <input matInput formControlName="estimatedValue" type="number" />
                    </mat-form-field>

                    <mat-form-field appearance="outline">
                        <mat-label>Monthly Contribution ($)</mat-label>
                        <input matInput formControlName="monthlyContribution" type="number" />
                    </mat-form-field>

                    <mat-form-field appearance="outline">
                        <mat-label>Target Date</mat-label>
                        <input matInput formControlName="targetDate" type="date" />
                    </mat-form-field>

                    <mat-checkbox formControlName="isActive">Active Goal</mat-checkbox>
                </div>
            </div>

            <button mat-raised-button type="button" (click)="addFinancialGoal()">+ Add Goal</button>
        </mat-card>

        <!-- Income & Expenses -->
        <mat-card>
            <h3>Income & Expenses</h3>
            <div formGroupName="financialData">
                <mat-form-field appearance="outline">
                    <mat-label>Monthly Income</mat-label>
                    <input matInput formControlName="income" type="number" />
                </mat-form-field>

                <mat-form-field appearance="outline">
                    <mat-label>Fixed Expenses</mat-label>
                    <input matInput formControlName="fixedExpenses" type="number" />
                </mat-form-field>

                <mat-form-field appearance="outline">
                    <mat-label>Variable Expenses</mat-label>
                    <input matInput formControlName="variableExpenses" type="number" />
                </mat-form-field>

                <mat-form-field appearance="outline">
                    <mat-label>Savings</mat-label>
                    <input matInput formControlName="savings" type="number" />
                </mat-form-field>

                <mat-form-field appearance="outline">
                    <mat-label>Debt ($)</mat-label>
                    <input matInput formControlName="debt" type="number" />
                </mat-form-field>

                <mat-form-field appearance="outline">
                    <mat-label>Emergency Fund ($)</mat-label>
                    <input matInput formControlName="emergencyFund" type="number" />
                </mat-form-field>

                <!-- Computed fields (Read-Only) -->
                <mat-form-field appearance="outline">
                    <mat-label>Monthly Budget ($)</mat-label>
                    <input matInput formControlName="monthlyBudget" type="number" />
                </mat-form-field>

                <mat-form-field appearance="outline">
                    <mat-label>Total Net Worth ($)</mat-label>
                    <input matInput formControlName="totalNetWorth" type="number" />
                </mat-form-field>
            </div>

            <mat-form-field appearance="outline">
                <mat-label>Risk Tolerance</mat-label>
                <mat-select formControlName="riskTolerance">
                    <mat-option value="Low">Low</mat-option>
                    <mat-option value="Medium">Medium</mat-option>
                    <mat-option value="High">High</mat-option>
                </mat-select>
            </mat-form-field>
        </mat-card>

        <button mat-raised-button color="primary" type="submit">Submit & View Dashboard</button>
    </form>
</div>